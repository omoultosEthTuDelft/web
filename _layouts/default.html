<!DOCTYPE html>
<html>
  <head>
    <title>{{ page.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link href="{{ site.url }}/css/theme.css" rel="stylesheet">
    <link href="{{ site.url }}/css/syntax.css" rel="stylesheet">

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L4Q73TRG0T"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L4Q73TRG0T');
    </script>

    <meta name="keywords" content="tu delft, delft, professor, mechanical engineering, molecular simulations, othonas, moultos, otto, eth, princeton, tamuq, university, of, ioannina, polymers, diffusion, monte carlo"/>

</head>

<body>

<nav class="navbar navbar-expand-md navbar-light">
  <div class="container bg-light">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="{{ site.url }}">Othonas (Otto) A. Moultos</a>
    <div class="collapse navbar-collapse w-100" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link{% if page.url contains '/projects' or page.url contains '/publications' or page.url contains '/cool' %} active{% endif %}" href="#" id="navbarResearchDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Research <i class="fa-solid fa-chevron-down nav-dropdown-arrow" aria-hidden="true"></i></a>
          <div class="dropdown-menu" aria-labelledby="navbarResearchDropdown">
            <a class="dropdown-item" href="{{ site.url }}/projects">Projects</a>
            <a class="dropdown-item" href="{{ site.url }}/publications/">Publications</a>
            <a class="dropdown-item" href="{{ site.url }}/cool/">Simulation gallery</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link{% if page.url contains '/people' or page.url contains '/alumni' %} active{% endif %}" href="#" id="navbarPeopleDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">People <i class="fa-solid fa-chevron-down nav-dropdown-arrow" aria-hidden="true"></i></a>
          <div class="dropdown-menu" aria-labelledby="navbarPeopleDropdown">
            <a class="dropdown-item" href="{{ site.url }}/people">Team</a>
            <a class="dropdown-item" href="{{ site.url }}/alumni">Alumni</a>
          </div>
        </li>
        <li class="nav-item"><a class="nav-link{% if page.url contains '/teaching' %} active{% endif %}" href="{{ site.url }}/teaching/">Teaching</a></li>
        <li class="nav-item"><a class="nav-link{% if page.url contains '/photos' %} active{% endif %}" href="{{ site.url }}/photos/">Photos</a></li>
        <li class="nav-item"><a class="nav-link{% if page.url contains '/software' %} active{% endif %}" href="{{ site.url }}/software/">Scientific software</a></li>
      </ul>
      <a href="https://www.tudelft.nl" class="ml-auto" target="_blank" rel="noopener">
        <img src="{{ site.url }}/logos/tudelft-logo.jpg" alt="TU Delft" class="navbar-logo">
      </a>
    </div>
  </div>
</nav>

<div class="container">
    {{ content }}
    <hr>
</div>
    
<footer class="site-footer">
  <div class="footer-social">
    <a href="https://github.com/omoultosEthTuDelft" title="GitHub"><i class="fa-brands fa-github"></i></a>
    <a href="https://scholar.google.ca/citations?user=r6fFwkQAAAAJ&hl=en" title="Google Scholar"><i class="fa-solid fa-graduation-cap"></i></a>
    <a href="https://nl.linkedin.com/in/othonas-moultos-498585a9" title="LinkedIn"><i class="fa-brands fa-linkedin-in"></i></a>
    <a href="https://www.researchgate.net/profile/Othon-Moultos" title="ResearchGate"><i class="fa-brands fa-researchgate"></i></a>
    <a href="https://orcid.org/0000-0001-7477-9684" title="ORCID"><i class="fa-brands fa-orcid"></i></a>
  </div>
  <small>&copy; Othonas Moultos &nbsp; | &nbsp; Last Update: {{ site.time | date_to_string }} &nbsp; | &nbsp; <a href="https://github.com/omoultosEthTuDelft/web">Source on Github</a></small>
</footer>


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>

<!-- Chat Widget -->
<div id="chat-widget">
  <button id="chat-bubble" aria-label="Open chat assistant">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
  </button>
  <div id="chat-panel" class="chat-hidden">
    <div id="chat-header">
      <span>Ask Otto's AI Assistant</span>
      <button id="chat-close" aria-label="Close chat">&times;</button>
    </div>
    <div id="chat-messages">
      <div class="chat-msg bot">Hi! I'm Otto's AI assistant. Ask me anything about his research, publications, teaching, team, or software.</div>
    </div>
    <div id="chat-input-bar">
      <input type="text" id="chat-input" placeholder="Type your question..." autocomplete="off">
      <button id="chat-send" aria-label="Send message">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
      </button>
    </div>
  </div>
</div>
<style>
  #chat-widget{position:fixed;bottom:24px;right:24px;z-index:9999;font-family:'Inter',sans-serif}
  #chat-bubble{width:56px;height:56px;border-radius:50%;background:#3973ac;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,.2);transition:background .2s,transform .2s}
  #chat-bubble:hover{background:#1a5276;transform:scale(1.05)}
  #chat-panel{width:380px;height:500px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.18);display:flex;flex-direction:column;overflow:hidden;position:absolute;bottom:70px;right:0;transition:opacity .2s,transform .2s}
  #chat-panel.chat-hidden{opacity:0;transform:translateY(20px);pointer-events:none}
  #chat-header{background:#3973ac;color:#fff;padding:14px 16px;display:flex;justify-content:space-between;align-items:center;font-weight:600;font-size:15px}
  #chat-close{background:none;border:none;color:#fff;font-size:22px;cursor:pointer;line-height:1;padding:0 2px}
  #chat-close:hover{opacity:.7}
  #chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px}
  .chat-msg{max-width:85%;padding:10px 14px;border-radius:12px;font-size:14px;line-height:1.5;word-wrap:break-word}
  .chat-msg.bot{background:#f0f4f8;color:#222;align-self:flex-start;border-bottom-left-radius:4px}
  .chat-msg.user{background:#3973ac;color:#fff;align-self:flex-end;border-bottom-right-radius:4px}
  .chat-msg.bot a{color:#3973ac;text-decoration:underline}
  .chat-typing{align-self:flex-start;padding:10px 14px;background:#f0f4f8;border-radius:12px;border-bottom-left-radius:4px;font-size:14px;color:#888}
  .chat-typing span{display:inline-block;animation:chatDots 1.4s infinite;margin:0 1px}
  .chat-typing span:nth-child(2){animation-delay:.2s}
  .chat-typing span:nth-child(3){animation-delay:.4s}
  @keyframes chatDots{0%,80%,100%{opacity:.3}40%{opacity:1}}
  #chat-input-bar{display:flex;border-top:1px solid #e0e0e0;padding:10px 12px;gap:8px;background:#fafafa}
  #chat-input{flex:1;border:1px solid #ddd;border-radius:8px;padding:8px 12px;font-size:14px;font-family:'Inter',sans-serif;outline:none;transition:border-color .2s}
  #chat-input:focus{border-color:#3973ac}
  #chat-send{width:36px;height:36px;border-radius:8px;background:#3973ac;color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}
  #chat-send:hover{background:#1a5276}
  #chat-send:disabled{background:#a0bdd4;cursor:not-allowed}
  @media(max-width:480px){
    #chat-panel{width:calc(100vw - 32px);height:calc(100vh - 120px);right:-8px;bottom:70px;border-radius:12px}
  }
</style>
<script>
(function(){
  var WORKER_URL='https://chatbot-worker.omoultos.workers.dev';
  var bubble=document.getElementById('chat-bubble');
  var panel=document.getElementById('chat-panel');
  var closeBtn=document.getElementById('chat-close');
  var input=document.getElementById('chat-input');
  var sendBtn=document.getElementById('chat-send');
  var messages=document.getElementById('chat-messages');
  var history=[];

  bubble.addEventListener('click',function(){
    panel.classList.toggle('chat-hidden');
    if(!panel.classList.contains('chat-hidden'))input.focus();
  });
  closeBtn.addEventListener('click',function(){panel.classList.add('chat-hidden');});

  function addMsg(text,role){
    var div=document.createElement('div');
    div.className='chat-msg '+role;
    div.innerHTML=formatText(text);
    messages.appendChild(div);
    messages.scrollTop=messages.scrollHeight;
    return div;
  }

  function formatText(text){
    // Basic markdown-like formatting
    return text
      .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
      .replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>')
      .replace(/\*(.+?)\*/g,'<em>$1</em>')
      .replace(/`(.+?)`/g,'<code style="background:#e8e8e8;padding:1px 4px;border-radius:3px;font-size:13px">$1</code>')
      .replace(/\[([^\]]+)\]\((https?:\/\/[^\)]+)\)/g,'<a href="$2" target="_blank" rel="noopener">$1</a>')
      .replace(/\n/g,'<br>');
  }

  function showTyping(){
    var div=document.createElement('div');
    div.className='chat-typing';
    div.id='chat-typing-indicator';
    div.innerHTML='<span>.</span><span>.</span><span>.</span>';
    messages.appendChild(div);
    messages.scrollTop=messages.scrollHeight;
  }

  function removeTyping(){
    var el=document.getElementById('chat-typing-indicator');
    if(el)el.remove();
  }

  function sendMessage(){
    var text=input.value.trim();
    if(!text)return;
    input.value='';
    addMsg(text,'user');
    history.push({role:'user',text:text});
    sendBtn.disabled=true;
    input.disabled=true;
    showTyping();

    fetch(WORKER_URL,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({message:text,history:history.slice(0,-1)})
    })
    .then(function(r){return r.json();})
    .then(function(data){
      removeTyping();
      var reply=data.reply||data.error||'Sorry, something went wrong.';
      addMsg(reply,'bot');
      history.push({role:'assistant',text:reply});
    })
    .catch(function(){
      removeTyping();
      addMsg('Sorry, I could not reach the server. Please try again later.','bot');
    })
    .finally(function(){
      sendBtn.disabled=false;
      input.disabled=false;
      input.focus();
    });
  }

  sendBtn.addEventListener('click',sendMessage);
  input.addEventListener('keydown',function(e){
    if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}
  });
})();
</script>

  </body>
</html>